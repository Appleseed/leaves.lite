<!-- {{user | json}} -->
<div class="user-profile">

    <div class="row" ng-if="loadingProfile">
        <div class="col-md-12 text-center">Loading..</div>
    </div>

    <div class="row" ng-if="!loadingProfile">

        <div class="col-md-12">
            
            <div class="user-profile-data">
                <div class="picture">
                    <img src={{user.user_photo}}>
                </div>
                <div class="user-details">
                    <h3>{{user.name}}</h3>
                    <div>You have subscribed for {{user.tags.length === undefined ? '0' : user.tags.length}} topics: <span ng-repeat="tag in user.tags"><u>{{tag.label}} {{$last ? '' : ', '}}</u></span> </div>
                    <!-- <div>Your tags: {{user.tags.length === undefined ? '0' : user.tags.length}}</div> -->
                    <div>email notification: {{user.notification_type !== 'undefined' ? user.notification_type : 'weekly'}}</div>
                </div>
            </div>

        </div>

        <div class="col-md-12">
            <br>
            <br>
            <ul>
                <li>Select the topics you are interested to get an email notification every time a new item is added with that topic(s)</li>
                <li>
                    Choose: 
                        <div class="radio">
                            <label>
                            <input type="radio" ng-model="notification_type" value="daily" ng-change="selectNotificationType(notification_type)" name="optionsRadios" id="optionsRadios1" ng-checked="user.notification_type === 'daily' ? true : false">
                                Daily
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" ng-model="notification_type" value="weekly" ng-change="selectNotificationType(notification_type)" name="optionsRadios" id="optionsRadios2" ng-checked="user.notification_type === 'weekly' ? true : false">
                                Weekly
                            </label>
                        </div>
                </li>
            </ul>
        </div>

        <div class="col-md-12">
            <div class="search-input-div text-center">
                <input type="search" ng-model="tag_name" ng-value="tag_name" placeholder="Search topics" style="min-width: 300px">
                <input type="button" name="submit" value="reset" ng-click="tag_name = ''">
            </div>
        </div>

        <div class="col-md-12 tags-list">
            <div ng-if="topic_add_msg">Topic Selected: {{event_on_tag}}</div>
            <div ng-if="topic_remove_msg">Topic Removed: {{event_on_tag}}</div>
            <div class="row" style="margin-bottom: 50px">
                <div ng-class="tag.selected ? 'col-md-2 tag selected' : 'col-md-2 tag'" ng-repeat="tag in tags | filter:tag_name">
                    <div class="tag-name" ng-click="!tag.selected && addTagToProfile(tag, tag.index_value)"><span>{{tag.label}}</span></div>
                    <div class="tab-remove" ng-if="tag.selected" ng-click="addTagToProfile(tag, tag.index_value)"><span>x</span></div>
                </div>
            </div>
        </div>
        
    </div>
<div class="modal fade bs-example-modal-lg" id="addLeaf" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="gridSystemModalLabel">Add New Leaf</h4>
            </div>
            <div class="modal-body">
                <div class="google-login-btn" ng-if="!userLoggedIn" ng-click="googleLogin()">
                    <div class="please-login-msg">Please log in to use this feature</div>
                    <img src="./img/login-google.jpg">
                </div>
                <div ng-if="userLoggedIn" class="add-leaf-form">
                    <form name="addUrlForm" ng-submit="newLeaf(leavesurl)">
                        <div class="form-group">
                            <label for="addUrl">Site URL</label>
                            <input type="url" class="form-control" name="leavesurl" ng-model="leavesurl" placeholder="Enter URL" required>
                        </div>
                        <div id="addleafError" style="color: red;"></div>
                        {{error.data.error.message}}
                        <button type="submit" class="btn btn-primary">Save it</button>
                    </form>
                </div>
                <!-- <span ng-if="!addUrlForm.leavesurl.$valid">Enter Valid URL</span> -->
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal" id="closeButton">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
</div>